<md-toolbar>
    <div class="md-toolbar-tools inspector-toolbar">
        <md-input-container>
            <input ng-model="query.message_identifier" type="text" placeholder="Message identifier" class="md-whiteframe-1dp">
        </md-input-container>
        <md-button class="md-raised" ng-click="inspect(query)" ng-disable="!query.request_id">Inspect</md-button>

        <span flex></span>

        <md-button class="toggle-button" ng-class="{'active': display.graph}" ng-click="toggle('graph')">
            <md-icon class="zmdi zmdi-grain"></md-icon>
            <md-tooltip>Graph</md-tooltip>
        </md-button>
        <md-button class="toggle-button" ng-class="{'active': display.table}" ng-click="toggle('table')">
            <md-icon class="zmdi zmdi-view-list"></md-icon>
            <md-tooltip>List</md-tooltip>
        </md-button>
    </div>
</md-toolbar>

<div class="inspector-container">
    <div class="placeholder" ng-show="display.message">{{ display.message }}</div>
    <div class="placeholder" ng-show="display.loading">
        <md-progress-circular md-mode="indeterminate"></md-progress-circular>
    </div>
    <div class="inspector" ng-show="display.inspector">
        <div class="graph" resizable r-directions="['right']" r-flex="true" ng-show="display.graph">
            <graph inspection="inspection"></graph>
        </div>
        <div class="list" ng-show="display.table">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>DateTime</th>
                        <th>Sender</th>
                        <th>Recipient</th>
                        <th>Type</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="profile in inspection.profiles" ng-click="openProfileDetails(profile)">
                        <td>{{ profile.timing.start | date:'dd/MM/yyyy HH:mm:ss.sss' }}</td>
                        <td>{{ profile.sender.service }}</td>
                        <td>{{ profile.recipient.service }}</td>
                        <td>{{ profile.message.type }}</td>
                        <td>{{ profile.message.status_code }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="message-details" ng-show="profile">
    <header>
        <div class="close-icon" ng-click="closeProfileDetails()">
            <i class="zmdi zmdi-close"></i>
        </div>
        <h1>Message <small>{{ profile.identifier }}</small></h1>
    </header>
    <aside class="clearfix details">
        <div class="col-md-4">
            <div class="col-sm-6"><strong>Type</strong></div>
            <div class="col-sm-6">{{ profile.message.type }}</div>
            <div class="col-sm-6"><strong>Timing</strong></div>
            <div class="col-sm-6">{{ profile.timing.duration }} ms</div>
        </div>
        <div class="col-md-4">
            <div class="col-sm-6"><strong>Sender</strong></div>
            <div class="col-sm-6">{{ profile.sender.service }}</div>
            <div class="col-sm-6"><strong>Recipient</strong></div>
            <div class="col-sm-6">{{ profile.recipient.service }} 2</div>
        </div>
        <div class="col-md-4">
            <div class="col-sm-6"><strong>Parent</strong></div>
            <div class="col-sm-6">
                <a href="#" ng-show="profile.parent">{{ profile.parent.identifier }}</a>
                <em ng-hide="profile.parent">None</em>
            </div>
        </div>
    </aside>
    <md-tabs md-border-bottom md-autoselect>
        <md-tab label="HTTP">
            <p>Details of peers</p>
        </md-tab>
        <md-tab label="Peers">
            <p>Details of peers</p>
        </md-tab>
        <md-tab label="Logs">
            <p><em>You need to configure the log sources.</em></p>
        </md-tab>
    </md-tabs>
</div>
